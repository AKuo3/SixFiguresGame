<!DOCTYPE html>
<html>
    <head>
	     <script src="https://code.jquery.com/jquery-3.6.0.js" 
		     integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	     <script src="/static/cis444.js"></script>
    </head>
    <body>

	<script>
		var used_easy_questions = new Array();
		var used_medium_questions = new Array();
		var used_hard_questions = new Array();
		var current_question_id = 0;
		var current_question_difficulty = "easy";
		var current_question_number = 0;
        var prize_order = ["$500", "$1,000", "$2,000", "$3,000", "$5,000", "$7,000", "$10,000", "$20,000", "$30,000", "$50,000", "$100,000", "$250,000", "$500,000","$1 Million"];
		var current_prize_amount = prize_order[0];

		function initial_game_load() {
			$.post("/open_api/setup", {}, function (data) {
				console.log(data.token);
				jwt = data.token;
                get_easy_question();
			});
            document.getElementById("welcome_screen").style.display = "none";
            document.getElementById("main_game_screen").style.display = "inline";
            document.getElementById("dollar_amount").innerHTML = current_prize_amount;
		}

		function get_easy_question() {
			secure_post_with_token("/secure_api/get_easy_question", { "used_easy_questions": used_easy_questions }, function (data) {
				current_question_id = data.question_info.question_id;
				console.log(data.question_info.question_id);
				used_easy_questions.push(current_question_id);
				document.getElementById("question_text").innerHTML = data.question_info.question_text;
				document.getElementById("label_A").innerHTML = data.question_info.question_answerA;
                document.getElementById("label_B").innerHTML = data.question_info.question_answerB;
                document.getElementById("label_C").innerHTML = data.question_info.question_answerC;
                document.getElementById("label_D").innerHTML = data.question_info.question_answerD;
			},
				function (err) { console.log(err) });
		}

		function verify_user_answer(user_answer) {
            document.getElementById("welcome_screen").style.display = "none";
            document.getElementById("answer_checker_screen").style.display = "inline";
			secure_get_with_token("/secure_api/verify_answer", { "current_question_id": current_question_id, "user_answer": user_answer, "current_question_difficulty": current_question_difficulty }, function (data) {
				if (data.user_correct == true) {
					document.getElementById("correct_or_not_text").innerHTML = "You were right!";
				}
				else {
                    document.getElementById("correct_or_not_text").innerHTML = "You were wrong...";
				}
				document.getElementById("loading").style.display = "none";
                document.getElementById("correct_or_not_text").style.display = "inline";
            },
                function (err) { console.log(err) });
        }

	</script>
        <div id="welcome_screen">
			<h1>Welcome to "Would Anyone Like To Earn Six Figures?"!!!</h1>
			<p>Press the button to start!</p>
			<button id="load_game_menu" onclick="initial_game_load();" >Start Game</button>
	    </div>
		<div id="main_game_screen" style="display:none">
			<p>For <span id="dollar_amount"></span>, here is your question:</p>
			<p id="question_text">DEFAULT QUESTION TEXT</p>
			<br />
			<form action="verify_user_answer(user_answer);">
				<input type="radio" id="answer_A" name="user_answer" value="A">
				<label id="label_A">TEST_ANSWER_A_LABEL</label><br />
				<input type="radio" id="answer_B" name="user_answer" value="B">
				<label id="label_B">TEST_ANSWER_B_LABEL</label><br />
				<input type="radio" id="answer_C" name="user_answer" value="C">
				<label id="label_C">TEST_ANSWER_C_LABEL</label><br />
				<input type="radio" id="answer_D" name="user_answer" value="D">
				<label id="label_D">TEST_ANSWER_D_LABEL</label><br />
				<input type="submit" value="Lock In"/>
			</form>
		</div>
		<div id="answer_checker_screen" style="display:none">
			<p id="loading">Loading...</p>
			<p id="correct_or_not_text" style="display:none">DEFAULT CORRECT TEXT</p> <br />
		</div>
    </body>
</html>

